{
  "loadMethods": {},
  "label": "WebhookV2",
  "icon": "https://raw.githubusercontent.com/Outerbridgeio/Outerbridge/master/packages/components/nodes/Webhook/webhook.svg",
  "name": "webhookV2",
  "type": "webhook",
  "category": "Utilities",
  "version": 5,
  "description": "Start workflow when webhook is called. Can return JSON or raw HTML.",
  "incoming": 0,
  "outgoing": 1,
  "inputParameters": [
    {
      "label": "HTTP Method",
      "name": "httpMethod",
      "type": "options",
      "options": [
        {
          "label": "GET",
          "name": "GET"
        },
        {
          "label": "POST",
          "name": "POST"
        }
      ],
      "default": "GET",
      "description": "The HTTP method to listen to."
    },
    {
      "label": "Authorization",
      "name": "authorization",
      "type": "options",
      "options": [
        {
          "label": "API",
          "name": "headerAuth",
          "description": "Webhook header must contain \"X-API-KEY\" with matching key"
        },
        {
          "label": "None",
          "name": "none"
        }
      ],
      "default": "none",
      "description": "The way to authorize incoming webhook."
    },
    {
      "label": "API key",
      "name": "apiKey",
      "type": "asyncOptions",
      "loadMethod": "getAPIKeys",
      "description": "Incoming call must include header \"x-api-key\" with matching API key.",
      "show": {
        "inputParameters.authorization": [
          "headerAuth"
        ]
      }
    },
    {
      "label": "When to Return",
      "name": "returnType",
      "type": "options",
      "options": [
        {
          "label": "Immediate Response",
          "name": "immediateResponse",
          "description": "Returns response immediately once webhook is called"
        },
        {
          "label": "When Last Node Finishes",
          "name": "lastNodeResponse",
          "description": "Returns output response of the last executed node"
        }
      ],
      "default": "immediateResponse",
      "description": "When should the Webhook respond."
    },
    {
      "label": "Response Format",
      "name": "responseFormat",
      "type": "options",
      "options": [
        {
          "label": "JSON",
          "name": "json"
        },
        {
          "label": "HTML",
          "name": "html"
        }
      ],
      "default": "json",
      "description": "Choose JSON or HTML response."
    },
    {
      "label": "Render Mode",
      "name": "renderMode",
      "type": "options",
      "options": [
        {
          "label": "Raw (paste HTML)",
          "name": "raw"
        },
        {
          "label": "Template (Handlebars)",
          "name": "template"
        }
      ],
      "default": "raw",
      "description": "Return pasted HTML directly, or render a template.",
      "show": {
        "inputParameters.responseFormat": [
          "html"
        ]
      }
    },
    {
      "label": "Inline HTML",
      "name": "inlineHtml",
      "type": "string",
      "rows": 8,
      "default": "<!doctype html><html><body><h1>Hello!</h1></body></html>",
      "description": "Exact HTML to return when renderMode = raw.",
      "optional": false,
      "show": {
        "inputParameters.responseFormat": [
          "html"
        ],
        "inputParameters.renderMode": [
          "raw"
        ]
      }
    },
    {
      "label": "Template Source",
      "name": "templateSource",
      "type": "options",
      "options": [
        {
          "label": "Inline (string)",
          "name": "inline"
        },
        {
          "label": "Remote URL",
          "name": "url"
        }
      ],
      "default": "inline",
      "description": "Where to get the template (template mode).",
      "show": {
        "inputParameters.responseFormat": [
          "html"
        ],
        "inputParameters.renderMode": [
          "template"
        ]
      }
    },
    {
      "label": "Template (inline)",
      "name": "templateInline",
      "type": "string",
      "rows": 8,
      "default": "",
      "description": "Template string for Handlebars.",
      "optional": true,
      "show": {
        "inputParameters.responseFormat": [
          "html"
        ],
        "inputParameters.renderMode": [
          "template"
        ],
        "inputParameters.templateSource": [
          "inline"
        ]
      }
    },
    {
      "label": "Template URL",
      "name": "templateUrl",
      "type": "string",
      "default": "",
      "description": "URL to fetch template from.",
      "optional": true,
      "show": {
        "inputParameters.responseFormat": [
          "html"
        ],
        "inputParameters.renderMode": [
          "template"
        ],
        "inputParameters.templateSource": [
          "url"
        ]
      }
    },
    {
      "label": "Template Engine",
      "name": "templateEngine",
      "type": "options",
      "options": [
        {
          "label": "Handlebars",
          "name": "hbs"
        }
      ],
      "default": "hbs",
      "description": "Rendering engine used for HTML templates.",
      "show": {
        "inputParameters.responseFormat": [
          "html"
        ],
        "inputParameters.renderMode": [
          "template"
        ]
      }
    },
    {
      "label": "Template Context (JSON)",
      "name": "templateContext",
      "type": "json",
      "default": "{}",
      "description": "Optional context for template rendering (used only for immediate responses).",
      "optional": true,
      "show": {
        "inputParameters.responseFormat": [
          "html"
        ],
        "inputParameters.renderMode": [
          "template"
        ],
        "inputParameters.returnType": [
          "immediateResponse"
        ]
      }
    },
    {
      "label": "Response Headers",
      "name": "headers",
      "type": "json",
      "default": "{}",
      "description": "Additional response headers as a JSON object.",
      "optional": true
    },
    {
      "label": "Status Code",
      "name": "statusCode",
      "type": "number",
      "default": 200,
      "description": "HTTP status code to return.",
      "optional": true
    },
    {
      "label": "Response Code (Legacy)",
      "name": "responseCode",
      "type": "number",
      "default": 200,
      "description": "Deprecated alias of Status Code.",
      "optional": true
    }
  ],
  "filePath": "https://raw.githubusercontent.com/fruitbox12/nodes/main/nodes/Webhook/Webhook.js"
}
